var ve=r=>{throw TypeError(r)};var re=(r,e,s)=>e.has(r)||ve("Cannot "+s);var m=(r,e,s)=>(re(r,e,"read from private field"),s?s.call(r):e.get(r)),N=(r,e,s)=>e.has(r)?ve("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,s),j=(r,e,s,t)=>(re(r,e,"write to private field"),t?t.call(r,s):e.set(r,s),s),E=(r,e,s)=>(re(r,e,"access private method"),s);import{s as X,e as b,t as z,d as S,f as w,h as U,i as f,r as $,k as V,l as _,m as J,n as y,p as H,o as je,Q as D,v as ie,R as De,b as F,w as W,S as ke,j as L,q as _e,C as ye,T as Ie}from"../chunks/scheduler.C8vMPaWB.js";import{S as q,i as x,b as Z,d as ee,m as te,t as T,g as Ae,c as Ce,a as k,e as se}from"../chunks/index.DjUm7gUX.js";import{a as P,s as Q,r as O}from"../chunks/store.Dd3emoSP.js";import{g as Me}from"../chunks/entry.DZci4-LB.js";function le(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Be(r){let e,s,t,l=String(r[1]).padStart(2,"0")+"",o,a,n=String(r[0]).padStart(2,"0")+"",c;return{c(){e=b("div"),s=b("div"),t=b("span"),o=z(l),a=z(":"),c=z(n),this.h()},l(i){e=S(i,"DIV",{class:!0});var h=w(e);s=S(h,"DIV",{class:!0});var v=w(s);t=S(v,"SPAN",{class:!0});var u=w(t);o=U(u,l),a=U(u,":"),c=U(u,n),u.forEach(f),v.forEach(f),h.forEach(f),this.h()},h(){$(t,"class","text-size svelte-y70idt"),$(s,"class","container svelte-y70idt"),$(e,"class","spacer svelte-y70idt")},m(i,h){V(i,e,h),_(e,s),_(s,t),_(t,o),_(t,a),_(t,c)},p(i,[h]){h&2&&l!==(l=String(i[1]).padStart(2,"0")+"")&&J(o,l),h&1&&n!==(n=String(i[0]).padStart(2,"0")+"")&&J(c,n)},i:y,o:y,d(i){i&&f(e)}}}function Ge(r,e,s){let t,l,o;return H(r,P,a=>s(0,t=a)),H(r,Q,a=>s(1,l=a)),H(r,O,a=>s(2,o=a)),je(()=>{D(Q,l=0,l),D(P,t=0,t);let a=setInterval(()=>{D(P,t++,t),t==60&&(D(P,t=0,t),D(Q,l++,l))},1e3);return()=>{clearInterval(a)}}),r.$$.update=()=>{r.$$.dirty&4&&o==!0&&(D(Q,l=0,l),D(P,t=0,t))},[t,l,o]}class Pe extends q{constructor(e){super(),x(this,e,Ge,Be,X,{})}}const ze="fix",pe="change";var ae,ne,B,R;class Y{constructor(e,s,t){N(this,ae,0);N(this,ne,0);N(this,B,2);N(this,R,pe);j(this,B,t),j(this,ae,e),j(this,ne,s)}get value(){return m(this,B)}set value(e){j(this,B,e)}get status(){return m(this,R)}set status(e){j(this,R,e)}static get STATUS_FIX(){return ze}static get STATUS_CHANGE(){return pe}}ae=new WeakMap,ne=new WeakMap,B=new WeakMap,R=new WeakMap;function Ue(r){let e,s,t=(r[0].value==2?"":r[0].value)+"",l,o,a;return{c(){e=b("div"),s=b("span"),l=z(t),this.h()},l(n){e=S(n,"DIV",{class:!0});var c=w(e);s=S(c,"SPAN",{class:!0});var i=w(s);l=U(i,t),i.forEach(f),c.forEach(f),this.h()},h(){$(s,"class","svelte-76p5uh"),$(e,"class","cell text-size svelte-76p5uh")},m(n,c){V(n,e,c),_(e,s),_(s,l),o||(a=ie(e,"click",r[1]),o=!0)},p(n,[c]){c&1&&t!==(t=(n[0].value==2?"":n[0].value)+"")&&J(l,t)},i:y,o:y,d(n){n&&f(e),o=!1,a()}}}function He(r,e,s){let{cell:t}=e,l=De();const o=()=>{t.status!=Y.STATUS_FIX&&(s(0,t.value=s(0,++t.value,t)%2,t),l("change"))};return r.$$set=a=>{"cell"in a&&s(0,t=a.cell)},[t,o]}class Fe extends q{constructor(e){super(),x(this,e,He,Ue,X,{cell:0})}}function ge(r){let e,s,t=r[0]?"thumb_up":"thumb_down",l,o;return{c(){e=b("div"),s=b("span"),l=z(t),this.h()},l(a){e=S(a,"DIV",{class:!0});var n=w(e);s=S(n,"SPAN",{class:!0});var c=w(s);l=U(c,t),c.forEach(f),n.forEach(f),this.h()},h(){$(s,"class",o="material-symbols-outlined icon "+(r[0]?"valid":"invalid")+" svelte-1e0jnj"),$(e,"class","popup svelte-1e0jnj")},m(a,n){V(a,e,n),_(e,s),_(s,l)},p(a,n){n&1&&t!==(t=a[0]?"thumb_up":"thumb_down")&&J(l,t),n&1&&o!==(o="material-symbols-outlined icon "+(a[0]?"valid":"invalid")+" svelte-1e0jnj")&&$(s,"class",o)},d(a){a&&f(e)}}}function Le(r){let e,s,t,l,o,a="check",n,c,i,h="restart_alt",v,u,M,fe,g=r[1]&&ge(r);return{c(){e=b("link"),s=F(),t=b("div"),l=b("div"),o=b("span"),o.textContent=a,n=F(),c=b("div"),i=b("span"),i.textContent=h,v=F(),g&&g.c(),u=W(),this.h()},l(p){const C=ke("svelte-1ruei9s",document.head);e=S(C,"LINK",{rel:!0,href:!0}),C.forEach(f),s=L(p),t=S(p,"DIV",{class:!0});var K=w(t);l=S(K,"DIV",{});var de=w(l);o=S(de,"SPAN",{class:!0,"data-svelte-h":!0}),_e(o)!=="svelte-5141f9"&&(o.textContent=a),de.forEach(f),n=L(K),c=S(K,"DIV",{});var me=w(c);i=S(me,"SPAN",{class:!0,"data-svelte-h":!0}),_e(i)!=="svelte-17g0g33"&&(i.textContent=h),me.forEach(f),K.forEach(f),v=L(p),g&&g.l(p),u=W(),this.h()},h(){$(e,"rel","stylesheet"),$(e,"href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"),$(o,"class","material-symbols-outlined icon svelte-1e0jnj"),$(i,"class","material-symbols-outlined icon svelte-1e0jnj"),$(t,"class","wrapper svelte-1e0jnj")},m(p,C){_(document.head,e),V(p,s,C),V(p,t,C),_(t,l),_(l,o),_(t,n),_(t,c),_(c,i),V(p,v,C),g&&g.m(p,C),V(p,u,C),M||(fe=[ie(o,"click",r[3]),ie(i,"click",r[5])],M=!0)},p(p,[C]){p[1]?g?g.p(p,C):(g=ge(p),g.c(),g.m(u.parentNode,u)):g&&(g.d(1),g=null)},i:y,o:y,d(p){p&&(f(s),f(t),f(v),f(u)),f(e),g&&g.d(p),M=!1,ye(fe)}}}const Oe=2e3;function Re(r,e,s){let t;H(r,O,i=>s(2,t=i));let{board:l=null}=e,o=!1,a=!1;const n=()=>{s(0,o=l.isValidBoard()),s(1,a=!0),setTimeout(()=>{s(1,a=!1)},Oe)},c=()=>{D(O,t=!1,t),D(O,t=!0,t)};return r.$$set=i=>{"board"in i&&s(4,l=i.board)},[o,a,t,n,l,c]}class Xe extends q{constructor(e){super(),x(this,e,Re,Le,X,{board:4})}}const qe=8,xe=15;var I,G,A,d,Ve,Te,oe,ce,Ne,ue,he;class be{constructor(e){N(this,d);N(this,I,[]);N(this,G,0);N(this,A,0);j(this,G,e),j(this,A,e),j(this,I,[...Array(e)].map((s,t)=>[...Array(e)].map((l,o)=>new Y(t,o,2))));do E(this,d,Ve).call(this),E(this,d,Te).call(this);while(!this.isValidBoard())}isGameOver(){return m(this,I).flat(1).filter(e=>e.value!=2).length==m(this,A)**2?this.isValidBoard():!1}isValidBoard(){let e=!0,s=!0;for(let t of m(this,I))e&&(e=E(this,d,he).call(this,t));for(let t=0;t<m(this,A);t++)s&&(s=E(this,d,he).call(this,m(this,I).map(l=>l[t])));return e&&s}get rows(){return m(this,G)}get cols(){return m(this,A)}getCell(e,s){return e>=0&&e<m(this,G)&&s>=0&&s<m(this,A)?m(this,I)[e][s]:null}}I=new WeakMap,G=new WeakMap,A=new WeakMap,d=new WeakSet,Ve=function(){m(this,I).forEach(e=>{e.forEach(s=>{s.value=2,s.status=Y.STATUS_CHANGE})})},Te=function(){let e=new Set,s=E(this,d,ce).call(this,qe,xe);for(;e.size<s;){let t=E(this,d,oe).call(this,m(this,A)),l=E(this,d,oe).call(this,m(this,A));m(this,I)[t][l].value=E(this,d,ce).call(this,0,2),m(this,I)[t][l].status=Y.STATUS_FIX,e.add(`${t}-${l}`)}},oe=function(e){return Math.floor(Math.random()*e*100/100)},ce=function(e,s){return Math.floor(Math.random()*(s-e)+e)},Ne=function(e){for(let s=0;s<=e.length/2;s++)if(e[s].value!=2&&e[s].value==e[s+1].value&&e[s+1].value==e[s+2].value)return!0;return!1},ue=function(e,s){return e.filter(t=>t.value==s).length>m(this,A)/2},he=function(e){return!(E(this,d,Ne).call(this,e)==!0||E(this,d,ue).call(this,e,0)==!0||E(this,d,ue).call(this,e,1)==!0)};function Se(r,e,s){const t=r.slice();return t[3]=e[s],t[5]=s,t}function $e(r,e,s){const t=r.slice();return t[3]=e[s],t[7]=s,t}function we(r){let e,s;return e=new Fe({props:{cell:r[0].getCell(r[5],r[7])}}),e.$on("change",r[1]),{c(){Z(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,l){te(e,t,l),s=!0},p(t,l){const o={};l&1&&(o.cell=t[0].getCell(t[5],t[7])),e.$set(o)},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){se(e,t)}}}function Ee(r){let e,s,t=le({length:r[0].cols}),l=[];for(let a=0;a<t.length;a+=1)l[a]=we($e(r,t,a));const o=a=>k(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=W()},l(a){for(let n=0;n<l.length;n+=1)l[n].l(a);e=W()},m(a,n){for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(a,n);V(a,e,n),s=!0},p(a,n){if(n&3){t=le({length:a[0].cols});let c;for(c=0;c<t.length;c+=1){const i=$e(a,t,c);l[c]?(l[c].p(i,n),T(l[c],1)):(l[c]=we(i),l[c].c(),T(l[c],1),l[c].m(e.parentNode,e))}for(Ae(),c=t.length;c<l.length;c+=1)o(c);Ce()}},i(a){if(!s){for(let n=0;n<t.length;n+=1)T(l[n]);s=!0}},o(a){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)k(l[n]);s=!1},d(a){a&&f(e),Ie(l,a)}}}function Ke(r){let e,s,t,l,o,a=le({length:r[0].rows}),n=[];for(let i=0;i<a.length;i+=1)n[i]=Ee(Se(r,a,i));const c=i=>k(n[i],1,1,()=>{n[i]=null});return l=new Xe({props:{board:r[0]}}),{c(){e=b("div"),s=b("div");for(let i=0;i<n.length;i+=1)n[i].c();t=F(),Z(l.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var h=w(e);s=S(h,"DIV",{class:!0});var v=w(s);for(let u=0;u<n.length;u+=1)n[u].l(v);v.forEach(f),t=L(h),ee(l.$$.fragment,h),h.forEach(f),this.h()},h(){$(s,"class","board board-size svelte-bb3mzh"),$(e,"class","wrapper svelte-bb3mzh")},m(i,h){V(i,e,h),_(e,s);for(let v=0;v<n.length;v+=1)n[v]&&n[v].m(s,null);_(e,t),te(l,e,null),o=!0},p(i,[h]){if(h&3){a=le({length:i[0].rows});let u;for(u=0;u<a.length;u+=1){const M=Se(i,a,u);n[u]?(n[u].p(M,h),T(n[u],1)):(n[u]=Ee(M),n[u].c(),T(n[u],1),n[u].m(s,null))}for(Ae(),u=a.length;u<n.length;u+=1)c(u);Ce()}const v={};h&1&&(v.board=i[0]),l.$set(v)},i(i){if(!o){for(let h=0;h<a.length;h+=1)T(n[h]);T(l.$$.fragment,i),o=!0}},o(i){n=n.filter(Boolean);for(let h=0;h<n.length;h+=1)k(n[h]);k(l.$$.fragment,i),o=!1},d(i){i&&f(e),Ie(n,i),se(l)}}}function Qe(r,e,s){let t;H(r,O,a=>s(2,t=a));let l=new be(6);const o=()=>{l.isGameOver()==!0&&Me("/score")};return r.$$.update=()=>{r.$$.dirty&4&&t==!0&&s(0,l=new be(6))},[l,o,t]}class Ye extends q{constructor(e){super(),x(this,e,Qe,Ke,X,{})}}function Je(r){let e,s,t,l,o;return s=new Pe({}),l=new Ye({}),{c(){e=b("div"),Z(s.$$.fragment),t=F(),Z(l.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0});var n=w(e);ee(s.$$.fragment,n),t=L(n),ee(l.$$.fragment,n),n.forEach(f),this.h()},h(){$(e,"class","wrapper animate__animated animate__rotateIn svelte-rqwd8l")},m(a,n){V(a,e,n),te(s,e,null),_(e,t),te(l,e,null),o=!0},p:y,i(a){o||(T(s.$$.fragment,a),T(l.$$.fragment,a),o=!0)},o(a){k(s.$$.fragment,a),k(l.$$.fragment,a),o=!1},d(a){a&&f(e),se(s),se(l)}}}class lt extends q{constructor(e){super(),x(this,e,null,Je,X,{})}}export{lt as component};
